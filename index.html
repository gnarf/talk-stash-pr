<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Pull Requests</title>

    <meta name="description" content="Corey, a long time contributor to the jQuery project and an Open Web Engineer at Bocoup, is going to cover the basics of the pull request">
    <meta name="author" content="Corey Frang">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section style='position: relative; height: 75%'>
          <h2>Pull Requests</h2>
          <a href="https://confluence.atlassian.com/display/STASH0311/Using+pull+requests+in+Stash"><img src="images/title.png" alt="PR Overview" style="max-height: 75%"></a>
          <p><a href="https://gnarf.github.io/talk-stash-pr/">https://gnarf.github.io/talk-stash-pr</a><br>
          <small><a href="https://github.com/gnarf/talk-stash-pr">(source) https://github.com/gnarf/talk-stash-pr</a></small><br>
          <small>(space next slide, "s" speaker notes)</small>
          </p>
          <p style='text-align: right; position: absolute; bottom:0; right: 0;'>
            <small>
              Mx. Corey Frang<br>
              2016-09-08<br>
              Twitter: <a href="https://twitter.com/gnarf">@gnarf</a><br>
              GitHub: <a href="https://github.com/gnarf">@gnarf</a>
            </small>
          </p>
          <aside class="notes">
            Welcome!  There are some links in this presentation, feel free to follow along.<br>
            A quick little bit about myself.  My name is Corey, I prefer they/them pronouns,
            and you can find me on twitter and github @gnarf.
          </aside>
        </section>

        <section>
          <h3>I work at Bocoup</h3>
          <a href="http://bocoup.com"><img src="images/bocoup.png"></a>
          <aside class="notes">
            I work at bocoup, with some awesome peeps! And we all make pull requests everyday.
          </aside>
        </section>

        <section>
          <h3>I work on jQuery</h3>
          <a href="http://jquery.org"><img src="images/jquery.png"></a>
          <aside class="notes">
            I've contributed to a lot of jQuery teams.  The Core Team, UI Team, Infrastructure Team, and the Foundation Board to name a few.  If you've used .animate(), or looked at a jQuery website, you've used my work. That work was all done using Pull Requests.
          </aside>
        </section>

        <section>
          <h3><a href="https://en.wikipedia.org/?title=Git_(software)">Git</a>?</h3>

          <section>
            <h4>Distributed</h4>
            Everyone has their own local copy!
            <aside class="notes">
              I just want to review a few things about git.<br>
              ‚Üí distributed means every "clone" is it's own local repo<br>
            </aside>
          </section>

          <section>
            <h4>Speed!</h4>
            <aside class="notes">
              ‚Üí speedy because it's local for most operations, no need to check with the server to do most operations
            </aside>
          </section>

          <section>
            <h4>Non-Linear Workflow</h4>
            <img src="images/non-linear.png"><br>
            <small>(google image search "git workflow")</small>
            <aside class="notes">
              ‚Üí non-linear... branching and mergeing are super fast, A core assumption in Git is that a change will be merged more often than it is written<br>
            </aside>
          </section>

          <section>
            Bonus Example:
            <center style="height: 500px">
            <blockquote class="twitter-tweet" lang="en" style="height: 500px;"><p lang="en" dir="ltr">$ git rebase origin/master <a href="http://t.co/pAHtrPrm84">pic.twitter.com/pAHtrPrm84</a></p>&mdash; Alejandro AR (@kinduff) <a href="https://twitter.com/kinduff/status/556127056938151936">January 16, 2015</a></blockquote></center>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
          </section>
        </section>

        <section>
          <h3>Pull Requests</h3>

          <section>
            <p>PR's start as branches</p>
            Start Clean!
            <code><pre>
            git checkout master
            git pull origin master
            git checkout -b my-feature</pre></code>
            <aside class="notes">
              Get in the habbit of always branching from a "fresh pull" of master
            </aside>
          </section>

          <section>
            <p><a href="https://confluence.atlassian.com/bitbucketserver/jira-integration-776639874.html#JIRAintegration-branches">JIRA Integration</a></p>
            <img src="images/jira-create-branch.png"><br>
            Creating a branch from an issue. <br>
            Faster workflow from picking an issue to starting coding.<br>
            Bitbucket Server suggests a branch type and branch name, based on the issue.
            <aside class="notes">
              Usually we will be creating our branches directly in JIRA or BitBucket instead of the command line.  In this case we will want to `git fetch` and `git checkout branchname`
            </aside>
          </section>

          <section>
            <p>Follow the tutorial!</p>
            <a href="https://confluence.atlassian.com/display/STASH0311/Using+pull+requests+in+Stash">https://confluence.atlassian.com/display/<br>STASH0311/Using+pull+requests+in+Stash</a>
            <aside class="notes">
              Rather than read this entire document to you, I'm just going to cover the highlights.
              Pull requests let you push your commits, review, comment on diffs, and eventually merge
              a change into `master`.   This workflow has a lot of benifits, but mostly, release stability and confidence is going to increase as many eyes will see each change before it is made.
            </aside>
          </section>

          <section>
            <p>PR's are discussions</p>
            <img  style="max-width: 65%" src="images/pr-discuss.png"><br>
            (with code)
            <aside class="notes">When creating your PR, remember, it's a discussion.  Write about what you did, why you did it, and why you think it needs to be merged!</aside>
          </section>

          <section>
            Every change <strong>MUST</strong> enter a repository as a Pull Request.
            <aside class="notes">Every change...</aside>
          </section>

          <section>
            Code Reviews<br>
            <ul>
              <li>Both general and line comments.</li>
              <li>"Magic links" from comments<br>
                 <code>JIRA-issue#</code>, <code>#PR</code>, <code>sha</code></li>
               <li>Expect a back and forth</li>
            </ul>
            <aside class="notes">So now that we have a PR, lets talk about reviews. Bitbuckets interface allows us to comment on a PR, comment on a line of code in the diff of a PR, link up to other issues and CC other users and teams really easily.  Expect a bit of back and forth, make a few revisions, push fixes.</aside>
          </section>

          <section>
            <h4>Comments welcome!</h4>
            <ul>
              <li>"Can you explain why we need this?"</li>
              <li>"Would it be better to...."</li>
              <li>"I think you need a comment here, it took me a few minutes to figure out"</li>
              <li>"I tried this code locally, but the tests failed"</li>
            </ul>
            <aside class="notes">
              Sometimes what we really need is a fresh pair of eyes to tell us something is greek instead of java.  Just be friendly and try your best to be helpful to everyone involved.
            </aside>
          </section>

          <section>
            <img src="images/plus-1.jpg"><br>
            All done? üëç - :+1: - LGTM - Merge it in!<br>
            <aside class="notes">
              Once everyone signs off on it, the maintainers of a project will come through and merge your changes in.
            </aside>
          </section>
        </section>


        <section>
          <h3>Maintainers will merge</h3>
          <section>
            <h4>Pull direct from pull requests</h4>
            <a href="https://gist.github.com/gnarf/5406589">https://gist.github.com/gnarf/5406589</a>
            <ul>
              <li><code>git spr 4</code> - creates local branch pr/4 from the <code>origin</code> remote and checks it out</li>
              <li><code>git pr-clean</code> - removes all pr/* branches from your local repo</li>
            </ul>
            <aside class="notes">
              You'll be able to checkout their branches directly, but sometimes it's easier as a maintainer to organize your branches based on pull request number.  I've written some git aliases that can help
            </aside>
          </section>

          <section>
            <h4>Squashed...</h4>
            <img src="images/squash.gif" style="max-width: 65%">
            <aside class="notes">
              As a maintainer, when you merge with the `--squash` option, it will allow you to create a new commit.  Just remember to set the author on the new commit or it will go down in history and blame as your fault.
            </aside>
          </section>
        </section>

        <section>
          <h4>Conflicts? Rebase?</h4>
          <img src="images/rebase.gif" style="max-width: 65%">
          <p>The Maintainers might ask the Contributor to do this themselves if the conflict is too confusing.</p>
          <a href="https://robots.thoughtbot.com/git-interactive-rebase-squash-amend-rewriting-history">Notes on squash/rebase</a>
          <aside class="notes">
            Sometimes the conflict is too hard to merge by the maintainers.  At this point we want to ask the original developer to "rebase" their pull request against the latest "master".  This process is pretty intense, and is one of the most powerful and scary git commands.  I've linked here to some extra notes.
          </aside>
        </section>


        <section>
          <h3>Questions?</h3>
          <h4>I use git every day - A.M.A.</h4>
          <h4>Twitter: <a href="https://twitter.com/@gnarf">@gnarf</a> - anytime!</h4>
        </section>
      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
